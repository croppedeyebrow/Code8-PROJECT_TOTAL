{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";const useWebSocket=(url,email)=>{const ws=useRef(null);const[message,setMessage]=useState(null);useEffect(()=>{ws.current=new WebSocket(\"\".concat(url,\"?email=\").concat(encodeURIComponent(email)));ws.current.onopen=()=>{console.log(\"connected to \"+url);};ws.current.onmessage=evt=>{const message=JSON.parse(evt.data);console.log(message.message);setMessage(message.message);};return()=>{ws.current.close();};},[url,email]);const sendMessage=message=>{if(ws.current){ws.current.send(JSON.stringify(message));}};return{message,sendMessage};};export default useWebSocket;","map":{"version":3,"names":["useEffect","useRef","useState","useWebSocket","url","email","ws","message","setMessage","current","WebSocket","concat","encodeURIComponent","onopen","console","log","onmessage","evt","JSON","parse","data","close","sendMessage","send","stringify"],"sources":["C:/dev/PROJECT_TOTAL/src/main/react/src/context/useWebsocket.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nconst useWebSocket = (url, email) => {\r\n  const ws = useRef(null);\r\n  const [message, setMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    ws.current = new WebSocket(`${url}?email=${encodeURIComponent(email)}`);\r\n    ws.current.onopen = () => {\r\n      console.log(\"connected to \" + url);\r\n    };\r\n    ws.current.onmessage = (evt) => {\r\n      const message = JSON.parse(evt.data);\r\n      console.log(message.message);\r\n      setMessage(message.message);\r\n    };\r\n    return () => {\r\n      ws.current.close();\r\n    };\r\n  }, [url, email]);\r\n\r\n  const sendMessage = (message) => {\r\n    if (ws.current) {\r\n      ws.current.send(JSON.stringify(message));\r\n    }\r\n  };\r\n\r\n  return { message, sendMessage };\r\n};\r\n\r\nexport default useWebSocket;\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAEnD,KAAM,CAAAC,YAAY,CAAGA,CAACC,GAAG,CAAEC,KAAK,GAAK,CACnC,KAAM,CAAAC,EAAE,CAAGL,MAAM,CAAC,IAAI,CAAC,CACvB,KAAM,CAACM,OAAO,CAAEC,UAAU,CAAC,CAAGN,QAAQ,CAAC,IAAI,CAAC,CAE5CF,SAAS,CAAC,IAAM,CACdM,EAAE,CAACG,OAAO,CAAG,GAAI,CAAAC,SAAS,IAAAC,MAAA,CAAIP,GAAG,YAAAO,MAAA,CAAUC,kBAAkB,CAACP,KAAK,CAAC,CAAE,CAAC,CACvEC,EAAE,CAACG,OAAO,CAACI,MAAM,CAAG,IAAM,CACxBC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAGX,GAAG,CAAC,CACpC,CAAC,CACDE,EAAE,CAACG,OAAO,CAACO,SAAS,CAAIC,GAAG,EAAK,CAC9B,KAAM,CAAAV,OAAO,CAAGW,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,CAAC,CACpCN,OAAO,CAACC,GAAG,CAACR,OAAO,CAACA,OAAO,CAAC,CAC5BC,UAAU,CAACD,OAAO,CAACA,OAAO,CAAC,CAC7B,CAAC,CACD,MAAO,IAAM,CACXD,EAAE,CAACG,OAAO,CAACY,KAAK,CAAC,CAAC,CACpB,CAAC,CACH,CAAC,CAAE,CAACjB,GAAG,CAAEC,KAAK,CAAC,CAAC,CAEhB,KAAM,CAAAiB,WAAW,CAAIf,OAAO,EAAK,CAC/B,GAAID,EAAE,CAACG,OAAO,CAAE,CACdH,EAAE,CAACG,OAAO,CAACc,IAAI,CAACL,IAAI,CAACM,SAAS,CAACjB,OAAO,CAAC,CAAC,CAC1C,CACF,CAAC,CAED,MAAO,CAAEA,OAAO,CAAEe,WAAY,CAAC,CACjC,CAAC,CAED,cAAe,CAAAnB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}