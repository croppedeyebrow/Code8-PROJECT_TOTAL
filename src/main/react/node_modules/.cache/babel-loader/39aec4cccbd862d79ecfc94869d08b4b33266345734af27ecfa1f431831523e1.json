{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import{Container,OrderContainer,OrdererContainer,OrdererInfo,OrderInfo,OrdererName,OrdererAddr,OrdererPoint,OrderInput,OrderBtn,PayBtn}from\"../../style/Product/OrderFrom\";import Axios from\"../../axios/ProductAxios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const OrderFormPage=()=>{const location=useLocation();const{cart,totalAmount}=location.state||{};const[userPoints,setUserPoints]=useState(0);// 사용자 포인트\nconst{productName,quantity}=location.state||{};// 총 수량 계산\nconst totalQuantity=cart?cart.reduce((acc,item)=>acc+item.quantity,0):0;// 사용자 포인트 정보를 불러오는 함수\nconst fetchUserPoints=async()=>{try{const response=await Axios.getUserList();console.log(\"사용자 확인 : \",response.data);setUserPoints(response.data[0].userPoint);}catch(error){console.error(\"포인트 정보를 불러오는데 실패했습니다.\",error);}};useEffect(()=>{fetchUserPoints();},[]);// 결제 페이지로 이동하는 함수\nconst handlePayment=async()=>{try{const res=await Axios.doPurchase(totalAmount);console.log(\"point cal : \",totalAmount);console.log(\"결제 결과 : \",res);if(res.data===true){alert(\"결제가 완료되었습니다.\");setUserPoints(res.data.userPoints);}else{alert(\"결제 실패!! 잔액을 확인하세요.\");}}catch(error){console.error(\"결제 처리 중 에러 발생\",error);}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(OrdererContainer,{children:[/*#__PURE__*/_jsx(OrdererInfo,{children:\"\\uC8FC\\uBB38\\uC790 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(OrdererName,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})]}),/*#__PURE__*/_jsxs(OrdererAddr,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uBC30\\uC1A1\\uC9C0\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uC8FC\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{children:\"\\uC6B0\\uD3B8\\uBC88\\uD638 \\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uC0C1\\uC138\\uC8FC\\uC18C\\uB97C \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694.\"})]}),/*#__PURE__*/_jsx(OrdererPoint,{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC0AC\\uC6A9\\uAC00\\uB2A5 \\uD3EC\\uC778\\uD2B8 : \",userPoints]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(OrderContainer,{children:[/*#__PURE__*/_jsx(OrderInfo,{children:\"\\uC8FC\\uBB38 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(OrderInput,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\uC0C1\\uD488\\uBA85\"}),/*#__PURE__*/_jsx(\"div\",{children:productName})]}),/*#__PURE__*/_jsxs(OrderInput,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\uCD1D \\uC218\\uB7C9\"}),/*#__PURE__*/_jsxs(\"div\",{children:[totalQuantity||quantity,\" \\uAC1C\"]})]}),/*#__PURE__*/_jsx(OrderBtn,{children:\"\\uBB34\\uB8CC\\uBC30\\uC1A1\"}),/*#__PURE__*/_jsxs(OrderInput,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\uCD1D \\uAE08\\uC561\"}),/*#__PURE__*/_jsxs(\"div\",{children:[totalAmount&&totalAmount.toLocaleString(),\"\\uC6D0\"]})]}),/*#__PURE__*/_jsx(PayBtn,{onClick:handlePayment,children:\"\\uACB0\\uC81C\\uD558\\uAE30\"})]})]});};export default OrderFormPage;","map":{"version":3,"names":["React","useState","useEffect","useLocation","Container","OrderContainer","OrdererContainer","OrdererInfo","OrderInfo","OrdererName","OrdererAddr","OrdererPoint","OrderInput","OrderBtn","PayBtn","Axios","jsx","_jsx","jsxs","_jsxs","OrderFormPage","location","cart","totalAmount","state","userPoints","setUserPoints","productName","quantity","totalQuantity","reduce","acc","item","fetchUserPoints","response","getUserList","console","log","data","userPoint","error","handlePayment","res","doPurchase","alert","children","placeholder","toLocaleString","onClick"],"sources":["C:/dev/PROJECT_TOTAL/src/main/react/src/pages/Product/OrderFormPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation} from 'react-router-dom';\r\nimport {\r\n    Container,\r\n    OrderContainer,\r\n    OrdererContainer,\r\n    OrdererInfo,\r\n    OrderInfo,\r\n    OrdererName,\r\n    OrdererAddr,\r\n    OrdererPoint,\r\n\r\n    OrderInput,\r\n    OrderBtn,\r\n    PayBtn,\r\n} from \"../../style/Product/OrderFrom\";\r\nimport Axios from \"../../axios/ProductAxios\"\r\n\r\nconst OrderFormPage = () => {\r\n    const location = useLocation();\r\n    const { cart, totalAmount } = location.state || {};\r\n    const [ userPoints, setUserPoints] = useState(0); // 사용자 포인트\r\n    const { productName, quantity } = location.state || {};\r\n\r\n    // 총 수량 계산\r\n    const totalQuantity = cart ? cart.reduce((acc, item) => acc + item.quantity, 0) : 0;\r\n\r\n    // 사용자 포인트 정보를 불러오는 함수\r\n    const fetchUserPoints = async () => {\r\n        try {\r\n            const response = await Axios.getUserList();\r\n            console.log(\"사용자 확인 : \", response.data);\r\n            setUserPoints(response.data[0].userPoint);\r\n            \r\n        } catch (error) {\r\n            console.error(\"포인트 정보를 불러오는데 실패했습니다.\", error);\r\n        }\r\n        \r\n    };\r\n    useEffect(() => {\r\n        fetchUserPoints();\r\n    }, []);\r\n    \r\n    \r\n    // 결제 페이지로 이동하는 함수\r\n    const handlePayment = async() => {\r\n        \r\n        try {\r\n            const res = await Axios.doPurchase(totalAmount);\r\n            console.log(\"point cal : \", totalAmount)\r\n            console.log(\"결제 결과 : \", res);\r\n            if(res.data === true) {\r\n                alert(\"결제가 완료되었습니다.\");\r\n                setUserPoints(res.data.userPoints);\r\n            } else {\r\n                alert(\"결제 실패!! 잔액을 확인하세요.\");\r\n            }\r\n        \r\n        } catch (error) {\r\n            console.error(\"결제 처리 중 에러 발생\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <OrdererContainer>\r\n                <OrdererInfo>주문자 정보</OrdererInfo>\r\n                <OrdererName>\r\n                    <span>이름</span><br />\r\n                    <input placeholder='이름을 입력해주세요.' />\r\n                </OrdererName>\r\n                <OrdererAddr>\r\n                    <span>배송지</span><br/>\r\n                    <div>\r\n                        <input placeholder='주소'/>\r\n                        <button>우편번호 검색</button>\r\n                    </div>\r\n                    <input placeholder='상세주소를 입력해 주세요.'></input>\r\n                </OrdererAddr>\r\n                <OrdererPoint>\r\n                    <span>사용가능 포인트 : {userPoints}</span>\r\n                </OrdererPoint>\r\n            </OrdererContainer>\r\n            <br /><br /><br />\r\n            <OrderContainer>\r\n                <OrderInfo>주문 정보</OrderInfo>\r\n                <hr />\r\n                <OrderInput>\r\n                    <div>상품명</div>\r\n                    <div>{productName}</div>\r\n                </OrderInput>\r\n                <OrderInput>\r\n                    <div>총 수량</div>\r\n                    <div>{totalQuantity || quantity} 개</div>\r\n                </OrderInput>\r\n                <OrderBtn>무료배송</OrderBtn>\r\n                <OrderInput>\r\n                    <div>총 금액</div>\r\n                    <div>{totalAmount && totalAmount.toLocaleString()}원</div>\r\n                </OrderInput>\r\n                <PayBtn onClick={handlePayment}>결제하기</PayBtn>\r\n            </OrderContainer>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default OrderFormPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}