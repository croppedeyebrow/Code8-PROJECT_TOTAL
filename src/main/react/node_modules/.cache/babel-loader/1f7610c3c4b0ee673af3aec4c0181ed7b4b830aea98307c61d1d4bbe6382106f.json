{"ast":null,"code":"import{useEffect,useState}from\"react\";import MypageComponent from\"../component/Mypage/MypageComponent\";import{ReactComponent as Heart}from\"../images/HeartBox.svg\";import{ReactComponent as Subs}from\"../images/SubscriberBox.svg\";import{Artist,ArtistContainer,CashInput,ExchangeButton,ExchangeContainer,InterBox,InterBoxText,MainHead,MainHeadBox,MainHeadText,MainProfile,MoveButton,MoveButtonBox,MyPageContainer,PointBox}from\"../style/MyPageStyle\";import MemberInfoAxiosApi from\"../axios/MemberInfoAxios\";import ModalComponent from\"../utils/ModalComponent\";import PayComponent from\"../component/Mypage/PayComponent.tsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const MyPage=()=>{const[email,setEmail]=useState(\"asd123@naver.com\");const[userInfo,setUserInfo]=useState(null);const[userMusic,setUserMusic]=useState(null);const[userPerformance,setUserPerformance]=useState(null);const[amount,setAmount]=useState(0);const amountChange=e=>{const inputAmount=e.target.value;if(inputAmount<0){alert(\"음수는 입력하실 수 없습니다.\");return;}setAmount(inputAmount);};useEffect(()=>{const fetchUserInfoAndMusic=async()=>{try{const userInfoResponse=await MemberInfoAxiosApi.getUserInfo(email);console.log(userInfoResponse.data);setUserInfo(userInfoResponse.data);if(userInfoResponse.data){const musicResponse=await MemberInfoAxiosApi.getUserMusic(userInfoResponse.data.id);setUserMusic(musicResponse.data);}}catch(error){console.error(error);}};const fetchData=async()=>{const response=await MemberInfoAxiosApi.getUserInfoByPerformanceEmail(email);setUserPerformance(response.data);};fetchData();fetchUserInfoAndMusic();},[email]);const exchangePoints=async()=>{try{const response=await MemberInfoAxiosApi.exchangePoints(email,amount);if(response.status===200){alert(\"환전이 성공적으로 완료되었습니다.\");}else{alert(\"환전에 실패하였습니다. 다시 시도해주세요.\");}}catch(error){console.error(\"환전 요청 중 에러가 발생했습니다:\",error);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(MyPageContainer,{children:[/*#__PURE__*/_jsxs(MainHead,{children:[/*#__PURE__*/_jsx(MainProfile,{}),/*#__PURE__*/_jsxs(ArtistContainer,{children:[/*#__PURE__*/_jsxs(MainHeadBox,{children:[/*#__PURE__*/_jsxs(MainHeadText,{children:[\"\\uACF5\\uC5F0 \\uD69F\\uC218 :\",\" \",userPerformance&&userPerformance.performances.length]}),/*#__PURE__*/_jsxs(MainHeadText,{children:[\"\\uB4F1\\uB85D\\uB41C \\uC74C\\uC6D0 : \",userMusic&&userMusic.length]}),/*#__PURE__*/_jsx(InterBox,{children:/*#__PURE__*/_jsxs(InterBoxText,{children:[/*#__PURE__*/_jsx(Heart,{}),userMusic&&userMusic[0].musicDTO.heartCount]})})]}),/*#__PURE__*/_jsx(Artist,{children:\"ARTIST\"})]}),/*#__PURE__*/_jsxs(PointBox,{children:[/*#__PURE__*/_jsx(MainHeadText,{children:\"MY \\uD3EC\\uC778\\uD2B8\"}),userInfo&&userInfo.userPoint,/*#__PURE__*/_jsx(MoveButtonBox,{children:userInfo&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ModalComponent,{open:/*#__PURE__*/_jsx(MoveButton,{children:\"\\uCDA9\\uC804\\uD558\\uAE30\"}),content:/*#__PURE__*/_jsx(PayComponent,{email:userInfo.userEmail,username:userInfo.userName,phone:userInfo.userPhone}),openButtonStyle:{bgColor:\"rgba(0,0,0,0)\",textColor:\"black\"},close:\"\\uB2EB\\uAE30\"}),/*#__PURE__*/_jsx(ModalComponent,{open:/*#__PURE__*/_jsx(MoveButton,{children:\"\\uD658\\uC804\\uD558\\uAE30\"}),content:/*#__PURE__*/_jsxs(ExchangeContainer,{children:[/*#__PURE__*/_jsx(CashInput,{type:\"number\",value:amount,onChange:amountChange}),/*#__PURE__*/_jsx(ExchangeButton,{onClick:exchangePoints,children:\"\\uD658\\uC804\\uD558\\uAE30\"})]}),openButtonStyle:{bgColor:\"rgba(0,0,0,0)\",textColor:\"black\"},close:\"\\uB2EB\\uAE30\"})]})})]})]}),/*#__PURE__*/_jsx(MypageComponent,{userMusic:userMusic,userPerformance:userPerformance,userInfo:userInfo})]})});};export default MyPage;","map":{"version":3,"names":["useEffect","useState","MypageComponent","ReactComponent","Heart","Subs","Artist","ArtistContainer","CashInput","ExchangeButton","ExchangeContainer","InterBox","InterBoxText","MainHead","MainHeadBox","MainHeadText","MainProfile","MoveButton","MoveButtonBox","MyPageContainer","PointBox","MemberInfoAxiosApi","ModalComponent","PayComponent","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyPage","email","setEmail","userInfo","setUserInfo","userMusic","setUserMusic","userPerformance","setUserPerformance","amount","setAmount","amountChange","e","inputAmount","target","value","alert","fetchUserInfoAndMusic","userInfoResponse","getUserInfo","console","log","data","musicResponse","getUserMusic","id","error","fetchData","response","getUserInfoByPerformanceEmail","exchangePoints","status","children","performances","length","musicDTO","heartCount","userPoint","open","content","userEmail","username","userName","phone","userPhone","openButtonStyle","bgColor","textColor","close","type","onChange","onClick"],"sources":["C:/dev/PROJECT_TOTAL/src/main/react/src/pages/MyPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport MypageComponent from \"../component/Mypage/MypageComponent\";\r\nimport { ReactComponent as Heart } from \"../images/HeartBox.svg\";\r\nimport { ReactComponent as Subs } from \"../images/SubscriberBox.svg\";\r\n\r\nimport {\r\n  Artist,\r\n  ArtistContainer,\r\n  CashInput,\r\n  ExchangeButton,\r\n  ExchangeContainer,\r\n  InterBox,\r\n  InterBoxText,\r\n  MainHead,\r\n  MainHeadBox,\r\n  MainHeadText,\r\n  MainProfile,\r\n  MoveButton,\r\n  MoveButtonBox,\r\n  MyPageContainer,\r\n  PointBox,\r\n} from \"../style/MyPageStyle\";\r\nimport MemberInfoAxiosApi from \"../axios/MemberInfoAxios\";\r\nimport ModalComponent from \"../utils/ModalComponent\";\r\nimport PayComponent from \"../component/Mypage/PayComponent.tsx\";\r\n\r\nconst MyPage = () => {\r\n  const [email, setEmail] = useState(\"asd123@naver.com\");\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [userMusic, setUserMusic] = useState(null);\r\n  const [userPerformance, setUserPerformance] = useState(null);\r\n  const [amount, setAmount] = useState(0);\r\n\r\n  const amountChange = (e) => {\r\n    const inputAmount = e.target.value;\r\n\r\n    if (inputAmount < 0) {\r\n      alert(\"음수는 입력하실 수 없습니다.\");\r\n      return;\r\n    }\r\n    setAmount(inputAmount);\r\n  };\r\n  useEffect(() => {\r\n    const fetchUserInfoAndMusic = async () => {\r\n      try {\r\n        const userInfoResponse = await MemberInfoAxiosApi.getUserInfo(email);\r\n        console.log(userInfoResponse.data);\r\n        setUserInfo(userInfoResponse.data);\r\n        if (userInfoResponse.data) {\r\n          const musicResponse = await MemberInfoAxiosApi.getUserMusic(\r\n            userInfoResponse.data.id\r\n          );\r\n          setUserMusic(musicResponse.data);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n    const fetchData = async () => {\r\n      const response = await MemberInfoAxiosApi.getUserInfoByPerformanceEmail(\r\n        email\r\n      );\r\n      setUserPerformance(response.data);\r\n    };\r\n    fetchData();\r\n    fetchUserInfoAndMusic();\r\n  }, [email]);\r\n  const exchangePoints = async () => {\r\n    try {\r\n      const response = await MemberInfoAxiosApi.exchangePoints(email, amount);\r\n      if (response.status === 200) {\r\n        alert(\"환전이 성공적으로 완료되었습니다.\");\r\n      } else {\r\n        alert(\"환전에 실패하였습니다. 다시 시도해주세요.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"환전 요청 중 에러가 발생했습니다:\", error);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <MyPageContainer>\r\n        <MainHead>\r\n          <MainProfile></MainProfile>\r\n          <ArtistContainer>\r\n            <MainHeadBox>\r\n              <MainHeadText>\r\n                공연 횟수 :{\" \"}\r\n                {userPerformance && userPerformance.performances.length}\r\n              </MainHeadText>\r\n              <MainHeadText>\r\n                등록된 음원 : {userMusic && userMusic.length}\r\n              </MainHeadText>\r\n              <InterBox>\r\n                <InterBoxText>\r\n                  <Heart />\r\n                  {userMusic && userMusic[0].musicDTO.heartCount}\r\n                </InterBoxText>\r\n              </InterBox>\r\n            </MainHeadBox>\r\n\r\n            <Artist>ARTIST</Artist>\r\n          </ArtistContainer>\r\n          <PointBox>\r\n            <MainHeadText>MY 포인트</MainHeadText>\r\n            {userInfo && userInfo.userPoint}\r\n\r\n            <MoveButtonBox>\r\n              {userInfo && (\r\n                <>\r\n                  <ModalComponent\r\n                    open={<MoveButton>충전하기</MoveButton>}\r\n                    content={\r\n                      <PayComponent\r\n                        email={userInfo.userEmail}\r\n                        username={userInfo.userName}\r\n                        phone={userInfo.userPhone}\r\n                      />\r\n                    }\r\n                    openButtonStyle={{\r\n                      bgColor: \"rgba(0,0,0,0)\",\r\n                      textColor: \"black\",\r\n                    }}\r\n                    close=\"닫기\"\r\n                  />\r\n                  <ModalComponent\r\n                    open={<MoveButton>환전하기</MoveButton>}\r\n                    content={\r\n                      <ExchangeContainer>\r\n                        <CashInput\r\n                          type=\"number\"\r\n                          value={amount}\r\n                          onChange={amountChange}\r\n                        />\r\n                        <ExchangeButton onClick={exchangePoints}>\r\n                          환전하기\r\n                        </ExchangeButton>\r\n                      </ExchangeContainer>\r\n                    }\r\n                    openButtonStyle={{\r\n                      bgColor: \"rgba(0,0,0,0)\",\r\n                      textColor: \"black\",\r\n                    }}\r\n                    close=\"닫기\"\r\n                  />\r\n                </>\r\n              )}\r\n            </MoveButtonBox>\r\n          </PointBox>\r\n        </MainHead>\r\n        <MypageComponent\r\n          userMusic={userMusic}\r\n          userPerformance={userPerformance}\r\n          userInfo={userInfo}\r\n        />\r\n      </MyPageContainer>\r\n    </>\r\n  );\r\n};\r\nexport default MyPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}